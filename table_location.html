<!DOCTYPE html>
<html lang="zh-TW" class="bg-[#0a0a0a]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <title>å¿«æ¨‚49å¿˜å¹´æœƒåº§ä½åˆ†å¸ƒåœ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* ç¢ºä¿å…¨åŸŸèˆ‡è¶…å‡ºé‚Šç•Œå€åŸŸçš†ç‚ºé»‘åº• */
        html, body {
            background-color: #0a0a0a;
            color: #d4af37;
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100%;
            /* é‡å° iOS æ©¡çš®ç­‹æ•ˆæ‡‰çš„ç•™ç™½ä¿®å¾© */
            overscroll-behavior-y: none; 
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .gold-text {
            background: linear-gradient(to bottom, #f9f295, #e0aa3e, #b8860b, #e0aa3e, #f9f295);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: bold;
        }

        /* åœ“æ¡Œæ¨£å¼ */
        .table-circle {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, #2a2a2a 0%, #000000 100%);
            border: 2px solid #d4af37;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(212, 175, 55, 0.2);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            padding: 8px;
            flex-shrink: 0;
            scroll-margin-top: 150px; 
        }

        .table-circle:hover {
            transform: scale(1.15);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.9);
            z-index: 50;
            border-color: #f9f295;
        }

        /* VIP æ¡Œ */
        .table-vip {
            border: 3px solid #f9f295;
            box-shadow: 0 0 20px rgba(249, 242, 149, 0.3);
            background: radial-gradient(circle, #4d4126 0%, #1a1500 100%);
        }

        /* æ”å½±å™¨æ */
        .camera-box {
            width: 85px;
            height: 85px;
            border-radius: 12px;
            background: linear-gradient(135deg, #1e3a8a 0%, #000000 100%);
            border: 2px solid #3b82f6;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #93c5fd;
            font-size: 0.8rem;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(30, 64, 175, 0.6);
            letter-spacing: 0.2em;
        }

        /* æœå°‹å‘½ä¸­ */
        .highlight-pulse {
            animation: pulse-gold 1.5s infinite;
            border-color: #ffffff !important;
            transform: scale(1.25);
            z-index: 60;
        }
        
        /* ç•¶å‰æ²å‹•èšç„¦çš„ç›®æ¨™ */
        .currently-focused {
            outline: 4px solid white;
            outline-offset: 4px;
            z-index: 70;
        }

        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.8); }
            70% { box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
        }

        /* ç´…æ¯¯èµ°é“ */
        .aisle {
            background: linear-gradient(to bottom, transparent, rgba(153, 27, 27, 0.2), transparent);
            width: 60px;
            min-width: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            writing-mode: vertical-rl;
            letter-spacing: 1.2em;
            color: #991b1b;
            font-weight: bold;
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        /* ç‡ˆå…‰éŸ³éŸ¿æ©«å¸¶ */
        .divider-row {
            grid-column: span 4;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #d4af37;
            font-size: 0.8rem;
            letter-spacing: 0.8em;
            background: rgba(212, 175, 55, 0.08);
            border-top: 1px solid rgba(212, 175, 55, 0.15);
            border-bottom: 1px solid rgba(212, 175, 55, 0.15);
            margin: 15px 0;
            font-weight: 300;
            white-space: nowrap;
        }

        /* ç¶²æ ¼ç³»çµ± */
        .seating-grid {
            display: grid;
            grid-template-columns: repeat(4, 85px);
            gap: 15px;
            align-content: start;
        }

        .search-container {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(12px);
            padding: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        /* è¡Œå‹•ç‰ˆæ²å‹•ä¿®æ­£ */
        .scroll-wrapper {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding: 30px 40px; 
        }
        
        .layout-container {
            width: max-content;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin: 0 auto;
        }
    </style>
</head>
<body>

    <div class="search-container text-center">
        <h1 class="text-2xl md:text-3xl font-bold gold-text mb-3 tracking-[0.2em] md:tracking-[0.3em]">å¿«æ¨‚49å¿˜å¹´æœƒåº§ä½åˆ†å¸ƒåœ–</h1>
        <div class="relative max-w-lg mx-auto">
            <input type="text" id="searchInput" placeholder="æœå°‹åˆ†åº—ã€äººåé—œéµå­—æˆ–æ¡Œè™Ÿ" 
                class="w-full bg-zinc-900 border border-amber-600/30 rounded-full py-2.5 px-6 text-amber-100 focus:outline-none focus:border-amber-400 focus:ring-1 focus:ring-amber-400 transition-all shadow-xl text-sm">
            <span class="absolute right-5 top-2.5 text-amber-600/50 text-lg">ğŸ”</span>
        </div>
    </div>

    <div class="max-w-7xl mx-auto p-2 md:p-4 flex flex-col items-center">
        
        <div class="w-full text-center py-6 mb-4 border-b border-amber-900/20">
            <span class="text-xl md:text-2xl font-thin tracking-[1.5em] text-amber-900/60 ml-[1.5em]">ä¸»èˆå° STAGE</span>
        </div>

        <div id="mainScrollWrapper" class="scroll-wrapper">
            <div class="layout-container">
                <!-- å·¦å´å€åŸŸ -->
                <div id="leftArea" class="seating-grid"></div>

                <!-- ä¸­å¤®ç´…æ¯¯ -->
                <div class="aisle mx-12 self-stretch">
                    ç´… æ¯¯ èµ° é“
                </div>

                <!-- å³å´å€åŸŸ -->
                <div id="rightArea" class="seating-grid"></div>
            </div>
        </div>

        <div class="mt-20 mb-12 text-center text-amber-900/30 text-[10px] tracking-[0.4em] uppercase">
            Designed By ZOSS Tech
        </div>
    </div>

    <script>
        const leftTables = [
            { id: 1, name: 'å¤§é‡Œ 10' },
            { id: 2, name: 'å¤§é‡Œ 5 / ç²¾æ˜ä¸€ 4 / ç²¾èª  1' },
            { id: 3, name: 'ç²¾èª  10' },
            { id: 4, name: 'VIP (1ç´ )', isVIP: true, veg: 1 },
            { id: 9, name: 'èˆˆç¥¥ 10' },
            { id: 10, name: 'å°Šçˆµ 6 / èˆˆç¥¥ 4' },
            { id: 11, name: 'è—æ–‡ 8 / å…’ç«¥ 3' },
            { id: 12, name: 'VIP', isVIP: true },
            { id: 17, name: 'å¤§é‡Œ2 10 (1å…’ç«¥åº§æ¤…)' },
            { id: 18, name: 'æ–‡å¿ƒ 10 (8+2)' },
            { type: 'camera' }, // æ”å½±å™¨æå€
            { id: 19, name: 'VIP', isVIP: true },
            { id: 24, name: 'å¸‚æ”¿ 10 (2ç´ )', veg: 2 },
            { id: 25, name: 'å¸‚æ”¿ 3 (1ç´ ) / æ¼¢å£ 7 (1ç´ )', veg: 2 },
            { id: 26, name: 'å¤ªå¹³ 10 (8+2)' },
            { id: 27, name: 'è¥¿æ¹– 7 / æ­£ç¾© 3' },
            { id: 32, name: 'å“¡æ— 7 / è±åŸ 1 / è±åŸ2 1 / è±åŸ3 1' },
            { id: 33, name: 'è±åŸ2 10' },
            { id: 34, name: 'å¤§ç›´ 10' },
            { id: 35, name: 'å¤©æ¯ 4 / åŒ—æŠ• 6' },
            { id: 40, name: 'è±åŸ 10' },
            { id: 41, name: 'è±åŸ3 10' },
            { id: 42, name: 'å¤©æ¯ 10' },
            { id: 43, name: 'åŒ—æŠ• 10 (1å…’ç«¥åº§æ¤…)' },
            { type: 'divider', name: 'ç‡ˆå…‰éŸ³éŸ¿å€' },
            { id: 48, name: 'å¸‚åºœ 6 / æ¾å±± 4' },
            { id: 49, name: 'å¸‚åºœ 10' },
            { id: 50, name: 'æ¨‚ç¾¤é¤¨ 10' },
            { id: 51, name: 'å®œè˜­ 10 (1ç´ )', veg: 1 },
            { id: 56, name: 'åºœä¸­ 10' },
            { id: 57, name: 'åºœä¸­ 10' },
            { id: 58, name: 'æ°¸å‰ 10' },
            { id: 59, name: 'æ¨‚ç¾¤é¤¨ 3 / æ°¸å‰ 7' },
            { id: 64, name: 'åŒ—å±¯ 10' },
            { id: 65, name: 'åŒ—å±¯ 3 / åŒ—å¹³ 4 / å¤§å¢© 3' },
            { id: 66, name: 'å¤§å¢© 1 / ä¸­ç§‘ 9 (1ç´ )', veg: 1 },
            { id: 67, name: 'å´‡å¾· 10' },
            { id: 71, name: 'å¤§å¢© 10' },
            { id: 72, name: 'åŒ—å¹³ 10' },
            { id: 73, name: 'å»¶å’Œ 10' },
            { id: 74, name: 'ä¸­å¤® 10' },
            { id: 79, name: 'åŒ—å¤§å­¸åŸ 10 (1ç´ )', veg: 1 },
            { id: 80, name: 'è£•æ°‘ 10' },
            { id: 81, name: 'æ³°å±± 10' },
            { id: 82, name: 'æ¿æ©‹ 10' }
        ];

        const rightTables = [
            { id: 5, name: 'VIP', isVIP: true },
            { id: 6, name: 'æ†¶ç’‡ 10 (2ç´ )', veg: 2 },
            { id: 7, name: 'æ†¶ç’‡ 5 / é›™å’Œ 5' },
            { id: 8, name: 'æœ¨æŸµ 2 / æ–°èŠ 8 (1ç´ )', veg: 1 },
            { id: 13, name: 'VIP', isVIP: true },
            { id: 14, name: 'è‚²å¾· 10' },
            { id: 15, name: 'é›™å’Œ 10' },
            { id: 16, name: 'æœ¨æŸµ 10' },
            { id: 20, name: 'VIP', isVIP: true },
            { id: 21, name: 'è‚²å¾· 6 / æ—å£ 4' },
            { id: 22, name: 'é›™å’Œ 1 / æ°¸æ¨‚ 9' },
            { id: 23, name: 'ä¸­æ­£ 10' },
            { id: 28, name: 'VIP', isVIP: true },
            { id: 29, name: 'VIP', isVIP: true },
            { id: 30, name: 'æ±æ¹– 10 (1ç´ )', veg: 1 },
            { id: 31, name: 'ä¸­æ­£ 10 (1ç´ )', veg: 1 },
            { id: 36, name: 'VIP', isVIP: true },
            { id: 37, name: 'VIP', isVIP: true },
            { id: 38, name: 'æ±æ¹– 10' },
            { id: 39, name: 'æ–‡è¯ 10' },
            { id: 44, name: 'ä¼Šé€š 10' },
            { id: 45, name: 'é›™åŸ 10' },
            { id: 46, name: 'æ°‘ç”Ÿ 10' },
            { id: 47, name: 'æ°‘ç”Ÿ 10' },
            { type: 'divider', name: 'ç‡ˆå…‰éŸ³éŸ¿å€' },
            { id: 52, name: 'åŸ”å¢˜ 10' },
            { id: 53, name: 'åŸ”å¢˜ 10' },
            { id: 54, name: 'åŸ”å¢˜ 10' },
            { id: 55, name: 'æ¨¹æ— 10 (1ç´ )', veg: 1 },
            { id: 60, name: 'æ¼¢å…‹å¨œå¨œ 10' },
            { id: 61, name: 'æ¼¢å…‹å¨œå¨œ 3 / ç«¹åŒ— 7' },
            { id: 62, name: 'ä¸­å±± 5 / æ–°ç«¹ 5' },
            { id: 63, name: 'æ¿æ©‹ 10' },
            { type: 'camera' }, // æ”å½±å™¨æå€
            { id: 68, name: 'ç«¹åŒ— 10' },
            { id: 69, name: 'å‹æ„› 10' },
            { id: 70, name: 'å‹æ„› 10' },
            { id: 75, name: 'é’å¹´ 10' },
            { id: 76, name: 'å˜‰ç¾© 10' },
            { id: 77, name: 'å±æ± 10 (1ç´ )', veg: 1 },
            { id: 78, name: 'é³³ç² 7 / å±æ± 3' },
            { id: 83, name: 'èˆˆæ¥­ 4 / é’å¹´ 6' },
            { id: 84, name: 'èˆˆæ¥­ 10' },
            { id: 85, name: 'å±æ± 3 / å˜‰ç¾© 2 / äº”ç¦ 5' },
            { id: 86, name: 'é³³ç² 10' },
            { id: 87, name: 'æ–°å¤©åœ° 10' },
            { id: 88, name: 'å—ç´¡ 10' },
            { id: 89, name: 'é™½æ˜ 10' },
            { id: 90, name: 'äº”ç¦ 10' }
        ];

        let cycleInterval = null;
        let matchedElements = [];
        let currentCycleIndex = 0;

        function getAllUrlParams(url) {
      
          // get query string from url (optional) or window
          var queryString = url ? url.split('?')[1] : window.location.search.slice(1);
        
          // we'll store the parameters here
          var obj = {};
        
          // if query string exists
          if (queryString) {
        
            // stuff after # is not part of query string, so get rid of it
            queryString = queryString.split('#')[0];
        
            // split our query string into its component parts
            var arr = queryString.split('&');
        
            for (var i = 0; i < arr.length; i++) {
              // separate the keys and the values
              var a = arr[i].split('=');
        
              // set parameter name and value (use 'true' if empty)
              var paramName = a[0];
              var paramValue = typeof(a[1]) === 'undefined' ? true : a[1];
              /** 
              // (optional) keep case consistent
              paramName = paramName.toLowerCase();
              if (typeof paramValue === 'string')
                paramValue = paramValue.toLowerCase();
              **/
              // if the paramName ends with square brackets, e.g. colors[] or colors[2]
              if (paramName.match(/\[(\d+)?\]$/)) {
        
                // create key if it doesn't exist
                var key = paramName.replace(/\[(\d+)?\]/, '');
                if (!obj[key])
                  obj[key] = [];
        
                // if it's an indexed array e.g. colors[2]
                if (paramName.match(/\[\d+\]$/)) {
                  // get the index value and add the entry at the appropriate position
                  var index = /\[(\d+)\]/.exec(paramName)[1];
                  obj[key][index] = paramValue;
                } else {
                  // otherwise add the value to the end of the array
                  obj[key].push(paramValue);
                }
              } else {
                // we're dealing with a string
                if (!obj[paramName]) {
                  // if it doesn't exist, create property
                  obj[paramName] = paramValue;
                } else if (obj[paramName] && typeof obj[paramName] === 'string') {
                  // if property does exist and it's a string, convert it to an array
                  obj[paramName] = [obj[paramName]];
                  obj[paramName].push(paramValue);
                } else {
                  // otherwise add the property
                  obj[paramName].push(paramValue);
                }
              }
            }
          }
        
          return obj;
        }

        function stopAutoCycle() {
            if (cycleInterval) {
                clearInterval(cycleInterval);
                cycleInterval = null;
                matchedElements.forEach(el => el.classList.remove('currently-focused'));
            }
        }

        function startAutoCycle(elements) {
            stopAutoCycle();
            if (elements.length <= 1) return;
            matchedElements = elements;
            currentCycleIndex = 0;
            scrollToTarget(matchedElements[currentCycleIndex]);
            cycleInterval = setInterval(() => {
                currentCycleIndex = (currentCycleIndex + 1) % matchedElements.length;
                scrollToTarget(matchedElements[currentCycleIndex]);
            }, 3000);
        }

        function scrollToTarget(targetEl) {
            if (!targetEl) return;
            matchedElements.forEach(el => el.classList.remove('currently-focused'));
            targetEl.classList.add('currently-focused');
            targetEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
            const wrapper = document.getElementById('mainScrollWrapper');
            const rect = targetEl.getBoundingClientRect();
            const wrapperRect = wrapper.getBoundingClientRect();
            const scrollLeft = wrapper.scrollLeft + rect.left - (wrapperRect.width / 2) + (rect.width / 2);
            wrapper.scrollTo({ left: scrollLeft, behavior: 'smooth' });
        }

        // è¡Œç‚ºåµæ¸¬ä»¥ä¸­æ–·å¾ªç’°
        const userActivityEvents = ['mousedown', 'mousemove', 'touchstart', 'wheel', 'keydown'];
        userActivityEvents.forEach(eventType => {
            window.addEventListener(eventType, () => {
                if (cycleInterval) stopAutoCycle();
            }, { passive: true });
        });

        function createEl(data) {
            if (data.type === 'camera') return `<div class="camera-box">æ”å½±<br>å™¨æ</div>`;
            if (data.type === 'divider') return `<div class="divider-row">${data.name}</div>`;
            const vegHtml = data.veg ? `<span class="absolute -right-1 -top-1 text-[11px] bg-black/80 rounded-full px-1 shadow-sm">ğŸŒ¿</span>` : '';
            const vipClass = data.isVIP ? 'table-vip' : '';
            return `
                <div class="table-circle ${vipClass}" data-name="${data.name}" data-id="${data.id}">
                    <span class="text-[9px] text-amber-700/60 font-light -mb-0.5">TABLE</span>
                    <span class="text-xl font-bold gold-text">${data.id}</span>
                    <div class="text-[7.5px] text-zinc-300 mt-0.5 leading-[1.1] text-center w-full px-1 overflow-visible break-words">
                        ${data.name}
                    </div>
                    ${vegHtml}
                </div>
            `;
        }

        function performSearch(keyword, shouldScroll = true) {
            const val = keyword.toLowerCase().trim();
            const allTables = document.querySelectorAll('.table-circle');
            let matches = [];
            allTables.forEach(el => {
                const name = el.getAttribute('data-name').toLowerCase();
                const id = el.getAttribute('data-id');
                if (val !== "" && (name.includes(val) || id === val)) {
                    el.classList.add('highlight-pulse');
                    matches.push(el);
                } else {
                    el.classList.remove('highlight-pulse');
                    el.classList.remove('currently-focused');
                }
            });
            if (shouldScroll && matches.length > 0) {
                if (matches.length === 1) {
                    stopAutoCycle();
                    scrollToTarget(matches[0]);
                } else {
                    startAutoCycle(matches);
                }
            } else {
                stopAutoCycle();
            }
        }

        function render() {
            document.getElementById('leftArea').innerHTML = leftTables.map(createEl).join('');
            document.getElementById('rightArea').innerHTML = rightTables.map(createEl).join('');
            
            setTimeout(() => {
                const urlParams = new URLSearchParams(window.location.search);
                var queryParam;
                if (urlParams.has("liff.state")) {
                    var tmp = getAllUrlParams(decodeURIComponent(urlParams.get("liff.state")));
                    queryParam = tmp.q;
                } else {
                    queryParam = urlParams.get('q');
                }
                if (['å¿«æ¨‚ç¸½éƒ¨', 'ç‡Ÿé‹ä¸­å¿ƒ'].includes(queryParam)) {
                    queryParam = 'VIP';
                }
                if (queryParam) {
                    const searchInput = document.getElementById('searchInput');
                    searchInput.value = queryParam;
                    performSearch(queryParam, true);
                }
            }, 500);
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            performSearch(e.target.value, true);
        });

        window.onload = render;
    </script>
</body>
</html>
